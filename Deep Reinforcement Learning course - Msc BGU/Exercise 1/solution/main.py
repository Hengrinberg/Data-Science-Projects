# -*- coding: utf-8 -*-

from World import World
from algorithms import *


if __name__ == "__main__":

     world = World()
     P = np.array([np.array([[1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                             [0.8, 0.1, 0, 0, 0, 0.1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                             [0, 0.8, 0.1, 0, 0, 0, 0.1, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                             [0, 0, 0.8, 0.1, 0, 0, 0, 0.1, 0, 0, 0, 0, 0, 0, 0, 0],
                             [0.1, 0, 0, 0, 0.8, 0, 0, 0, 0.1, 0, 0, 0, 0, 0, 0, 0],
                             [0, 0.1, 0, 0, 0.8, 0, 0, 0, 0, 0.1, 0, 0, 0, 0, 0, 0],
                             [0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                             [0, 0, 0, 0.1, 0, 0, 0.8, 0, 0, 0, 0, 0.1, 0, 0, 0, 0],
                             [0, 0, 0, 0, 0.1, 0, 0, 0, 0.8, 0, 0, 0, 0.1, 0, 0, 0],
                             [0, 0, 0, 0, 0, 0.1, 0, 0, 0.8, 0, 0, 0, 0, 0.1, 0, 0],
                             [0, 0, 0, 0, 0, 0, 0.1, 0, 0, 0.8, 0, 0, 0, 0, 0.1, 0],
                             [0, 0, 0, 0, 0, 0, 0, 0.1, 0, 0, 0.8, 0, 0, 0, 0, 0.1],
                             [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0],
                             [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0],
                             [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0],
                             [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.1, 0, 0, 0.8, 0.1]]),

                   np.array([[1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                             [0.1, 0, 0.1, 0, 0, 0.8, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                             [0, 0.1, 0, 0.1, 0, 0, 0.8, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                             [0, 0, 0.1, 0.1, 0, 0, 0, 0.8, 0, 0, 0, 0, 0, 0, 0, 0],
                             [0, 0, 0, 0, 0.1, 0.1, 0, 0, 0.8, 0, 0, 0, 0, 0, 0, 0],
                             [0, 0, 0, 0, 0.1, 0, 0.1, 0, 0, 0.8, 0, 0, 0, 0, 0, 0],
                             [0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                             [0, 0, 0, 0, 0, 0, 0.1, 0.1, 0, 0, 0, 0.8, 0, 0, 0, 0],
                             [0, 0, 0, 0, 0, 0, 0, 0, 0.1, 0.1, 0, 0, 0.8, 0, 0, 0],
                             [0, 0, 0, 0, 0, 0, 0, 0, 0.1, 0, 0.1, 0, 0, 0.8, 0, 0],
                             [0, 0, 0, 0, 0, 0, 0, 0, 0, 0.1, 0, 0.1, 0, 0, 0.8, 0],
                             [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.1, 0.1, 0, 0, 0, 0.8],
                             [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0],
                             [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0],
                             [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0],
                             [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.1, 0.9]]),

                   np.array([[1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                             [0, 0.1, 0.8, 0, 0, 0.1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                             [0, 0, 0.1, 0.8, 0, 0, 0.1, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                             [0, 0, 0, 0.9, 0, 0, 0, 0.1, 0, 0, 0, 0, 0, 0, 0, 0],
                             [0.1, 0, 0, 0, 0, 0.8, 0, 0, 0.1, 0, 0, 0, 0, 0, 0, 0],
                             [0, 0.1, 0, 0, 0, 0, 0.8, 0, 0, 0.1, 0, 0, 0, 0, 0, 0],
                             [0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                             [0, 0, 0, 0.1, 0, 0, 0, 0.8, 0, 0, 0, 0.1, 0, 0, 0, 0],
                             [0, 0, 0, 0, 0.1, 0, 0, 0, 0, 0.8, 0, 0, 0.1, 0, 0, 0],
                             [0, 0, 0, 0, 0, 0.1, 0, 0, 0, 0, 0.8, 0, 0, 0.1, 0, 0],
                             [0, 0, 0, 0, 0, 0, 0.1, 0, 0, 0, 0, 0.8, 0, 0, 0.1, 0],
                             [0, 0, 0, 0, 0, 0, 0, 0.1, 0, 0, 0, 0.8, 0, 0, 0, 0.1],
                             [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0],
                             [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0],
                             [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0],
                             [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.1, 0, 0, 0, 0.9]]),

                   np.array([[1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                             [0.1, 0.8, 0.1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                             [0, 0.1, 0.8, 0.1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                             [0, 0, 0.1, 0.9, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                             [0.8, 0, 0, 0, 0.1, 0.1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                             [0, 0.8, 0, 0, 0.1, 0, 0.1, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                             [0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                             [0, 0, 0, 0.8, 0, 0, 0.1, 0.1, 0, 0, 0, 0, 0, 0, 0, 0],
                             [0, 0, 0, 0, 0.8, 0, 0, 0, 0.1, 0.1, 0, 0, 0, 0, 0, 0],
                             [0, 0, 0, 0, 0, 0.8, 0, 0, 0.1, 0, 0.1, 0, 0, 0, 0, 0],
                             [0, 0, 0, 0, 0, 0, 0.8, 0, 0, 0.1, 0, 0.1, 0, 0, 0, 0],
                             [0, 0, 0, 0, 0, 0, 0, 0.8, 0, 0, 0.1, 0.1, 0, 0, 0, 0],
                             [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0],
                             [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0],
                             [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0],
                             [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.8, 0, 0, 0.1, 0.1]])])

     R = np.array([[-1], [-0.04], [-0.04], [-0.04], [-0.04], [-0.04], [-1], [-0.04], [-0.04],
                   [-0.04], [-0.04], [-0.04], [1], [-1], [-1], [-0.04]])
     #2b)
     value, policy = value_iteration(world, R, P, 1, 10**-4)
     world.plot_value(value,'values_2b.png')
     world.plot_policy(policy, 'policy_2b.png')
     #2C)
     value, policy = value_iteration(world, R, P, 0.9, 10**-4)
     world.plot_value(value, 'values_2c.png')
     world.plot_policy(policy, 'policy_2c.png')
     #2d)

     R = np.array([[-1], [-0.02], [-0.02], [-0.02], [-0.02], [-0.02], [-1], [-0.02],
                   [-0.02], [-0.02], [-0.02], [-0.02], [1], [-1], [-1], [-0.02]])
     
     value, policy = value_iteration(world, R, P, 1, 10 ** -4)
     world.plot_value(value, 'values_2d.png')
     world.plot_policy(policy, 'policy_2d.png')

     #2e)
     R = np.array([[-1], [-0.04], [-0.04], [-0.04], [-0.04], [-0.04], [-1], [-0.04], [-0.04],
                   [-0.04], [-0.04], [-0.04], [1], [-1], [-1], [-0.04]])


     policy, values = policy_iteration(world, world.nStates, world.nActions, P, R, 0.9, 10**-4)









